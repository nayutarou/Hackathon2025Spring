{% load static %}
<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>時間割</title>
    <link rel="stylesheet" href="{% static 'css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>

<body>
    <header class="footer">
        <span class="site-title">Unitrex</span>
        <input type="checkbox" id="overlay-input" />
        <label for="overlay-input" id="overlay-button" class="menu-button">
            <span class="menu-label">menu</span>
            <span class="hamburger-icon"></span>
        </label>
    </header>

    <main>
        <div class="gnavi__wrap">
            <form method="get" action="">
                <label for="semester-select">学期選択:</label>
                <select name="semester" id="semester-select" onchange="this.form.submit()">
                    {% for sem in semesters %}
                        <option value="{{ sem.name }}" {% if sem == semester %} selected {% endif %}>
                            {{ sem.name }}
                        </option>
                    {% endfor %}
                </select>
            </form>
        </div>
        
        

        <table class="timetable">
            <thead>
                <tr>
                    <th></th>
                    <th>月</th>
                    <th>火</th>
                    <th>水</th>
                    <th>木</th>
                    <th>金</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for lesson in periods %}
                <tr>
                    <th>{{ lesson }}</th>
                    {% for day in weekdays %}
                        <td class="box flip">
                            {% for item in mytimetable_list %}
                                {% if item.subjectclass.lesson == lesson and item.subjectclass.week == day %}
                                    <form method="POST" action="{% url 'attendances:attendance' %}">
                                        {% csrf_token %}
                                        <!-- hiddenフィールドで必要なデータを送信 -->
                                        <input type="hidden" name="subject_id" value="{{ item.subjectclass.id }}">
                                        <input type="hidden" name="lesson" value="{{ lesson }}">
                                        <input type="hidden" name="week" value="{{ day }}">
                                        <input type="hidden" name="mytimetable_id" value="{{ mytimetable_id }}">
                                        
                                        <button type="submit" class="square-button">
                                            {{ item.subjectclass.subject.subject_name }}
                                        </button>
                                    </form>
                                {% endif %}
                            {% endfor %}
                        </td>
                    {% endfor %}
                    <td></td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        <div class="link_all">
            {% comment %} <a href="{% url 'registration' %}" class="link_a">単位確認ページへ</a> {% endcomment %}
            {% comment %} <a href="{% url 'registration' %}">
                <img src="{% static 'img/Group 453.png' %}" class="img_a" alt="単位確認">
            </a> {% endcomment %}
        </div>
{% comment %} 
        <section class="notice">
            <div class="text-with-lines">
                <div class="text-contents">
                    <div class="text-english">notice</div>
                    <div class="text-japanese">お知らせ</div>
                </div>
            </div>
            <div class="notice-stand">
                <ul class="news-list">
                    {% for notice in notice %}
                        <li class="item">
                            <a href="#">
                                <div class="tabulabel {% if notice.is_urgent %}first{% else %}second{% endif %}">
                                    {% if notice.is_urgent %}緊急{% else %}通常{% endif %}
                                </div>
                                <p class="title">{{ notice.title }}</p>
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <div class="notice-footer">
                <a href="{% url 'all_notices' %}" class="view-all">VIEW ALL</a>
                <a href="{% url 'registration' %}">
                    <img src="{% static 'img/Arrow 2.png' %}" class="arrows" alt="矢印">
                </a>
            </div>
        </section> {% endcomment %}
    </main>
</body>
</html>
